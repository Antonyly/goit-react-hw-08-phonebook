{"ast":null,"code":"import axios from \"axios\";\nexport const instance = axios.create({\n  baseURL: \"https://connections-api.herokuapp.com/\"\n});\n\nconst setToken = function () {\n  let token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n  if (token) {\n    return instance.defaults.headers.authorization = `Bearer ${token}`;\n  }\n\n  instance.defaults.headers.authorization = \"\";\n};\n\nexport const signup = async data => {\n  const {\n    data: result\n  } = await instance.post(\"/users/signup\", data);\n  setToken(result.token);\n  return result;\n};\nexport const login = async data => {\n  const {\n    data: result\n  } = await instance.post(\"/users/login\", data);\n  setToken(result.token);\n  return result;\n};\nexport const logout = async () => {\n  const {\n    data: result\n  } = await instance.post(\"/users/logout\");\n  setToken(\"\");\n  return result;\n};\nexport const getCurrent = async token => {\n  try {\n    setToken(token);\n    const {\n      data: result\n    } = await instance.get(\"/users/current\");\n\n    if (result.token) {\n      setToken(result.token);\n    }\n\n    return result;\n  } catch (error) {\n    setToken(\"\");\n    throw error;\n  }\n};","map":{"version":3,"sources":["/Users/antonlyzun/Desktop/GoIT/goit-react-hw-08-phonebook/src/shared/services/api/auth.js"],"names":["axios","instance","create","baseURL","setToken","token","defaults","headers","authorization","signup","data","result","post","login","logout","getCurrent","get","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,QAAQ,GAAGD,KAAK,CAACE,MAAN,CAAa;AACnCC,EAAAA,OAAO,EAAE;AAD0B,CAAb,CAAjB;;AAIP,MAAMC,QAAQ,GAAG,YAAgB;AAAA,MAAfC,KAAe,uEAAP,EAAO;;AAC/B,MAAIA,KAAJ,EAAW;AACT,WAAQJ,QAAQ,CAACK,QAAT,CAAkBC,OAAlB,CAA0BC,aAA1B,GAA2C,UAASH,KAAM,EAAlE;AACD;;AACDJ,EAAAA,QAAQ,CAACK,QAAT,CAAkBC,OAAlB,CAA0BC,aAA1B,GAA0C,EAA1C;AACD,CALD;;AAOA,OAAO,MAAMC,MAAM,GAAG,MAAOC,IAAP,IAAgB;AACpC,QAAM;AAAEA,IAAAA,IAAI,EAAEC;AAAR,MAAmB,MAAMV,QAAQ,CAACW,IAAT,CAAc,eAAd,EAA+BF,IAA/B,CAA/B;AACAN,EAAAA,QAAQ,CAACO,MAAM,CAACN,KAAR,CAAR;AACA,SAAOM,MAAP;AACD,CAJM;AAMP,OAAO,MAAME,KAAK,GAAG,MAAOH,IAAP,IAAgB;AACnC,QAAM;AAAEA,IAAAA,IAAI,EAAEC;AAAR,MAAmB,MAAMV,QAAQ,CAACW,IAAT,CAAc,cAAd,EAA8BF,IAA9B,CAA/B;AACAN,EAAAA,QAAQ,CAACO,MAAM,CAACN,KAAR,CAAR;AACA,SAAOM,MAAP;AACD,CAJM;AAMP,OAAO,MAAMG,MAAM,GAAG,YAAY;AAChC,QAAM;AAAEJ,IAAAA,IAAI,EAAEC;AAAR,MAAmB,MAAMV,QAAQ,CAACW,IAAT,CAAc,eAAd,CAA/B;AACAR,EAAAA,QAAQ,CAAC,EAAD,CAAR;AACA,SAAOO,MAAP;AACD,CAJM;AAMP,OAAO,MAAMI,UAAU,GAAG,MAAOV,KAAP,IAAiB;AACzC,MAAI;AACFD,IAAAA,QAAQ,CAACC,KAAD,CAAR;AACA,UAAM;AAAEK,MAAAA,IAAI,EAAEC;AAAR,QAAmB,MAAMV,QAAQ,CAACe,GAAT,CAAa,gBAAb,CAA/B;;AACA,QAAIL,MAAM,CAACN,KAAX,EAAkB;AAChBD,MAAAA,QAAQ,CAACO,MAAM,CAACN,KAAR,CAAR;AACD;;AACC,WAAOM,MAAP;AACH,GAPD,CAOE,OAAOM,KAAP,EAAc;AACdb,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACA,UAAMa,KAAN;AACD;AACF,CAZM","sourcesContent":["import axios from \"axios\";\n\nexport const instance = axios.create({\n  baseURL: \"https://connections-api.herokuapp.com/\",\n});\n\nconst setToken = (token = \"\") => {\n  if (token) {\n    return (instance.defaults.headers.authorization = `Bearer ${token}`);\n  }\n  instance.defaults.headers.authorization = \"\";\n};\n\nexport const signup = async (data) => {\n  const { data: result } = await instance.post(\"/users/signup\", data);\n  setToken(result.token);\n  return result;\n};\n\nexport const login = async (data) => {\n  const { data: result } = await instance.post(\"/users/login\", data);\n  setToken(result.token);\n  return result;\n};\n\nexport const logout = async () => {\n  const { data: result } = await instance.post(\"/users/logout\");\n  setToken(\"\");\n  return result;\n};\n\nexport const getCurrent = async (token) => {\n  try {\n    setToken(token);\n    const { data: result } = await instance.get(\"/users/current\");\n    if (result.token) {\n      setToken(result.token);\n    }\n      return result;\n  } catch (error) {\n    setToken(\"\");\n    throw error;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}